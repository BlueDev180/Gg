:root{
  color-scheme:dark;
  --bg:#0f0f11; --ui:#18181b; --grid:#202024; --hi:#ffd45a;
  --safeB: env(safe-area-inset-bottom,0px);
}
*{box-sizing:border-box; -webkit-tap-highlight-color: transparent;}
html,body{margin:0;background:var(--bg);font-family:-apple-system,system-ui,Segoe UI,Roboto;color:#eee;min-height:100dvh;overflow-x:hidden}

header,footer{
  background:var(--ui); color:#eaeaea; display:flex; align-items:center; gap:12px;
  padding:10px 14px; position:relative;
}
header{justify-content:space-between}
.build{color:#7bd7ff;font-size:12px}
.hud{display:flex;gap:10px;flex-wrap:wrap}
.hud .chip{background:#24242c;border:1px solid #32323a;border-radius:10px;padding:4px 10px;font-size:12px}
.btn{background:#2a2a31;color:#fff;border:1px solid #3b3b44;border-radius:8px;padding:8px 12px}

main{display:flex;justify-content:center;padding:8px 10px}
#field{
  width:80vw; height:auto; aspect-ratio:9/16;
  max-height:65dvh; background:#121216; border:1px solid #2a2a31; border-radius:12px;
  touch-action:none;
}

#synergies{display:flex;gap:8px;align-items:center;flex-wrap:wrap;padding:6px 10px;background:#141419;border-top:1px solid #262632;border-bottom:1px solid #262632}
.sy{display:flex;align-items:center;gap:6px;background:#1a1a22;border:1px solid #2c2c35;border-radius:10px;padding:4px 8px;font-size:12px}
.sy level{display:inline-block;background:#33384a;border-radius:6px;padding:2px 6px;margin-left:4px;color:#cde1ff}

footer{flex-direction:column; align-items:center; padding:10px 12px;gap:10px;padding-bottom:calc(10px + var(--safeB))}
.legend{display:flex; gap:8px; flex-wrap:wrap}
.b{display:inline-block; padding:4px 8px; border-radius:8px; font-size:12px}
.b-SK{background:#3a2727}
.b-AR{background:#243a27}
.b-WR{background:#2b2740}
.b-DB{background:#3a2b27}
.rate{font-size:12px;opacity:.85}

.bar{
  display:grid; grid-template-columns: repeat(6, 1fr);
  gap:8px; width:92vw; max-width:520px;
}
.block{
  background:#23232a; border:2px solid #35353f; border-radius:12px; padding:12px 0;
  text-align:center; font-weight:800; color:#fff; user-select:none;
  box-shadow: inset 0 0 0 2px #0002;
  transform: translateY(0); opacity:1;
  transition: transform .22s ease-out, opacity .22s ease-out;
}
.block.spawn{ transform: translateY(12px); opacity:0; pointer-events:none; }
.block.spawn.ready{ transform: translateY(0); opacity:1; pointer-events:auto; }
.block.preview{ outline:3px dashed #fff9 }

.modalWrap{position:fixed;inset:0;background:#0009;display:none;align-items:center;justify-content:center;z-index:40}
.modal{background:#17171d;border:1px solid #2c2c35;border-radius:14px;padding:14px;max-width:560px;width:92vw;box-shadow:0 20px 60px #000c}
.modal h2{margin:0 0 8px 0;font-size:18px}
.choiceList{display:grid;gap:10px}
.choice{background:#1d1d24;border:1px solid #2e2e38;border-radius:12px;padding:10px;display:flex;justify-content:space-between;align-items:center}
.choice .title{font-weight:700}
.choice .desc{font-size:12px;opacity:.85;margin-top:4px}
.choice .take{background:#2a2a31;border:1px solid #3b3b44;border-radius:8px;padding:8px 10px}
.modal .row{display:flex;justify-content:space-between;align-items:center;margin-top:10px}

.tip{position:fixed;left:50%;transform:translateX(-50%);bottom:calc(140px + var(--safeB));
  background:#141420;border:1px solid #2a2a34;border-radius:10px;padding:8px 12px;font-size:13px;color:#d7d7e4;z-index:35}
.tip b{color:#ffd45a}
